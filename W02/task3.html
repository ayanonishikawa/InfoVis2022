<html>

<head>
    <title>W02: Example 08</title>
</head>

<body>
    <p>
        <label>x0: <input type="number" id="v0_x0" /></label>
        <label>y0: <input type="number" id="v0_y0" /></label>
        <label>z0: <input type="number" id="v0_z0" /></label>
    </p>
    <p>
        <label>x1: <input type="number" id="v1_x1" /></label>
        <label>y1: <input type="number" id="v1_y1" /></label>
        <label>z1: <input type="number" id="v1_z1" /></label>
    </p>
    <p>
        <label>x2: <input type="number" id="v2_x2" /></label>
        <label>y2: <input type="number" id="v2_y2" /></label>
        <label>z2: <input type="number" id="v2_z2" /></label>
    </p>
    <p>
        <input type="button" id="calculate" onclick="event_button()" value="calculate" />
    </p>
    <p id="target"></p>
    <script src="vec3.js"></script>
    <script>
        var vertex0 = [3];
        var vertex1 = [3];
        var vertex2 = [3];
        var vertex_all = [vertex0, vertex1, vertex2];

        var element_x0 = document.getElementById('v0_x0');
        var element_y0 = document.getElementById('v0_y0');
        var element_z0 = document.getElementById('v0_z0');
        var element_x1 = document.getElementById('v1_x1');
        var element_y1 = document.getElementById('v1_y1');
        var element_z1 = document.getElementById('v1_z1');
        var element_x2 = document.getElementById('v2_x2');
        var element_y2 = document.getElementById('v2_y2');
        var element_z2 = document.getElementById('v2_z2');

        //calculateボタンが押されたら入力された値を配列に格納して面積を計算する
        function event_button() {
            vertex_all[0][0] = element_x0.value;
            vertex_all[0][1] = element_y0.value;
            vertex_all[0][2] = element_z0.value;
            vertex_all[1][0] = element_x1.value;
            vertex_all[1][1] = element_y1.value;
            vertex_all[1][2] = element_z1.value;
            vertex_all[2][0] = element_x2.value;
            vertex_all[2][1] = element_y2.value;
            vertex_all[2][2] = element_z2.value;
            for (i = 0; i < 3; i++) {
                for (j = 0; j < 3; j++) {
                    console.log(vertex_all[i][j]);
                }
            }
            var v0 = new Vec3(vertex0[0], vertex0[1], vertex0[2]);
            var v1 = new Vec3(vertex1[0], vertex1[1], vertex1[2]);
            var v2 = new Vec3(vertex2[0], vertex2[1], vertex2[2]);
            var S = AreaOfTriangle(v0, v1, v2); // (output value)
            document.getElementById("target").innerHTML = "S = " + S;
            console.log(S);
        }

        //三角形の面積を求める関数
        function AreaOfTriangle(vec0, vec1, vec2) {
            var vec_2_0 = vec0.sub(vec2);
            var vec_2_1 = vec1.sub(vec2);
            var dot_20_21 = vec_2_0.inner_product(vec_2_1);
            console.log(dot_20_21);
            var tmp = vec_2_0.length() * vec_2_0.length() * vec_2_1.length() * vec_2_1.length() - dot_20_21 * dot_20_21;
            console.log(tmp);
            var area = Math.sqrt(tmp) / 2;
            console.log(typeof(area));
            return area;
        }
    </script>
</body>

</html>